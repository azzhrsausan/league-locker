{% load static %}

<div class="bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden flex flex-col">
  
  <!-- Thumbnail -->
  {% if item.thumbnail %}
    <div class="w-full h-48 bg-gray-100 p-3 flex items-center justify-center">
      <img src="{{ item.thumbnail }}" alt="{{ item.name }}" class="w-full h-full object-contain rounded-md">
    </div>
  {% else %}
    <div class="w-full h-48 bg-gray-100 flex items-center justify-center text-gray-400 p-3">
      <img src="{% static 'images/no-items.png' %}" alt="No Image" class="w-16 h-16 opacity-70">
    </div>
  {% endif %}

  <!-- Card Body -->
  <div class="p-5 flex-1 flex flex-col">
    <!-- Title -->
    <h2 class="text-lg font-semibold text-gray-900 mb-2">
      <a href="{% url 'main:show_item' item.id %}" class="hover:text-[#0A1E54] transition-colors">
        {{ item.name }}
      </a>
    </h2>

    <!-- Category + Featured Badge -->
    <p class="text-sm text-gray-500 mb-3">
      <b>{{ item.category }}</b>
      {% if item.is_featured %} 
        <span class="ml-2 px-2 py-1 text-xs bg-[#B39A84] text-white rounded">Featured</span>
      {% endif %}
    </p>

    <!-- Price -->
    <p class="text-[#0A1E54] font-bold mb-3">Rp{{ item.price }}</p>

    <!-- Description -->
    <p class="text-gray-600 text-sm mb-4 flex-1">
      {{ item.description|truncatewords:20 }}...
    </p>

    <!-- Actions -->
    <div class="flex flex-col space-y-3 mt-auto">
      <!-- Read More Button (full width) -->
      <a href="{% url 'main:show_item' item.id %}" 
         class="w-full text-center text-sm px-3 py-2 rounded bg-[#0A1E54] text-white hover:bg-[#0C276E] transition-colors">
        Read More
      </a>

      <!-- Edit & Delete Buttons (side by side, same width) -->
      {% if user.is_authenticated and item.user == user %}
        <div class="flex gap-4">
          <!-- Edit Button -->
          <a href="{% url 'main:edit_item' item.pk %}" 
             class="flex-1 text-center text-sm px-3 py-2 rounded bg-[#FFE4A1] text-gray-900 hover:bg-[#e6cc84] transition-colors">
            Edit
          </a>
          <!-- Delete Button -->
          <a href="{% url 'main:delete_item' item.pk %}" 
             class="flex-1 text-center text-sm px-3 py-2 rounded bg-[#97322D] text-white hover:bg-[#7a2824] transition-colors">
            Delete
          </a>
        </div>
      {% endif %}
    </div>
  </div>
</div>
